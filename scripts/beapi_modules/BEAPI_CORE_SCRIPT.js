var tt=Object.defineProperty;var Te=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var T=(n,e,i)=>e in n?tt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,y=(n,e)=>{for(var i in e||(e={}))it.call(e,i)&&T(n,i,e[i]);if(Te)for(var i of Te(e))rt.call(e,i)&&T(n,i,e[i]);return n};var t=(n,e,i)=>(T(n,typeof e!="symbol"?e+"":e,i),i);var w=class{constructor(e=50){t(this,"_listeners",new Map);t(this,"max");t(this,"getMaxListeners",()=>this.max);this.max=e}static get[Symbol.toStringTag](){return"[undefined EventEmitter]"}static get[Symbol.name](){return"EventEmitter"}get[Symbol.toStringTag](){return"[object EventEmitter]"}get[Symbol.name](){return"EventEmitter"}static toString(){return"[undefined EventEmitter]"}toString(){return"[object EventEmitter]"}addListener(e,i){var r;this._listeners.size>=this.max&&console.warn(`warning: possible EventEmitter memory leak detected. ${this._listeners.size} listeners registered.`),this._listeners.set(e,[...(r=this._listeners.get(e))!=null?r:[],i])}removeListener(e,i){let r=this._listeners.get(e);r==null||r.splice(r==null?void 0:r.indexOf(i))}removeListeners(e){this._listeners.delete(e)}removeAllListeners(){this._listeners.clear()}envokeEvent(e,...i){var r;(r=this._listeners.get(e))==null||r.forEach(o=>{o(...i)})}listeners(e){return this._listeners.get(e)}listenerCount(e){var i,r;return(r=(i=this._listeners.get(e))==null?void 0:i.length)!=null?r:0}setMaxListeners(e){this.max=e}on(e,i){this.addListener(e,i)}off(e,i){this.removeListener(e,i)}emit(e,...i){this.envokeEvent(e,...i)}once(e,i){let r=(...o)=>{i(...o),this.removeListener(e,r)};this.addListener(e,r)}};var I=class{constructor(){t(this,"_runtimeId",0);t(this,"_intervals",new Map);t(this,"_timeouts",new Map);this._polyfillIntervals(),this._polyfillTimeouts()}start(e){e.on("Tick",()=>{this._intervals.forEach(i=>{var r;isNaN((r=i.og)!=null?r:NaN)||(i.tick--,i.tick<=0&&(i.cb(),i.tick=i.og))})}),e.on("Tick",()=>{this._timeouts.forEach((i,r)=>{i.tick--,i.tick<=0&&(i.cb(),this._timeouts.delete(r))})})}_polyfillIntervals(){globalThis.setInterval=(e,i)=>{let r=this._runtimeId++;return this._intervals.set(r,{cb:e,tick:i,og:i}),r},globalThis.clearInterval=e=>{this._intervals.delete(e)}}_polyfillTimeouts(){globalThis.setTimeout=(e,i)=>{let r=this._runtimeId++;return this._timeouts.set(r,{cb:e,tick:i}),r},globalThis.clearTimeout=e=>{this._timeouts.delete(e)}}};import{world as we}from"mojang-minecraft";var a=class{};var k=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","OnChat");t(this,"iName","beforeChat");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(we.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(we.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){if(this.alwaysCancel){e.cancel=!0;return}this._client.emit(this.name,{sender:e.sender.name?this._client.players.getByName(e.sender.name):this._client.players.getByNameTag(e.sender.nameTag),message:e.message,cancel(){e.cancel=!0}})}};import{world as Ie}from"mojang-minecraft";var S=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","OnJoin");t(this,"iName","playerJoin");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Ie.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Ie.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.players.create(e.player);this._client.players.add(i),this._client.emit(this.name,i)}};import{world as ke}from"mojang-minecraft";var L=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","OnLeave");t(this,"iName","playerLeave");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(ke.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(ke.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.players.getByName(e.playerName);this._client.emit(this.name,i),this._client.players.remove(i)}};import{world as Se}from"mojang-minecraft";var A=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","BlockCreated");t(this,"iName","blockPlace");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Se.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Se.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.players.getByIPlayer(e.player);!i||this._client.emit(this.name,{player:i,block:e.block,dimension:e.dimension,cancel(){let r=e.dimension,o=e.block.location;i.getGamemode()==="creative"?r.runCommand(`setblock ${o.x} ${o.y} ${o.z} air`):r.runCommand(`setblock ${o.x} ${o.y} ${o.z} air 0 destroy`)}})}};import{world as Le}from"mojang-minecraft";var B=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","BlockDestroyed");t(this,"iName","blockBreak");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Le.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Le.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.players.getByIPlayer(e.player);!i||this._client.emit(this.name,{player:i,block:e.block,brokenBlock:e.brokenBlockPermutation,dimension:e.dimension,cancel(){let r=e.dimension,o=e.block.location;r.runCommand(`setblock ${o.x} ${o.y} ${o.z} ${e.brokenBlockPermutation.type.id}`)}})}};import{world as Ae,Player as nt}from"mojang-minecraft";var N=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ItemUse");t(this,"iName","beforeItemUse");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||Ae.events[this.iName].subscribe(this._logic)}off(){this._registered&&Ae.events[this.iName].unsubscribe(this._logic)}__logic(e){this._client.emit(this.name,{source:e.source instanceof nt?this._client.players.getByIPlayer(e.source):this._client.entities.getByIEntity(e.source),item:e.item,cancel(){e.cancel=!0}})}};import{world as Be,Player as ot}from"mojang-minecraft";var M=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ItemInteract");t(this,"iName","beforeItemUseOn");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||Be.events[this.iName].subscribe(this._logic)}off(){this._registered&&Be.events[this.iName].unsubscribe(this._logic)}__logic(e){this._client.emit(this.name,{source:e.source instanceof ot?this._client.players.getByIPlayer(e.source):this._client.entities.getByIEntity(e.source),item:e.item,block:e.source.dimension.getBlock(e.blockLocation),blockLocation:e.blockLocation,direction:e.direction,faceLocationX:e.faceLocationX,faceLocationY:e.faceLocationY,cancel(){e.cancel=!0}})}};import{world as Ne,Player as st}from"mojang-minecraft";var D=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityCreated");t(this,"iName","entityCreate");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||Ne.events[this.iName].subscribe(this._logic)}off(){this._registered&&Ne.events[this.iName].unsubscribe(this._logic)}__logic(e){if(e.entity instanceof st)return;let i=this._client.entities.create(e.entity);this._client.entities.add(i),this._client.emit(this.name,i)}};var z=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityDestroyed");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("Tick",this._logic)}off(){this._registered&&this._client.removeListener("Tick",this._logic)}__logic(){for(let[,e]of this._client.entities.getAll())try{e.getIEntity().id}catch(i){this._client.emit(this.name,e),this._client.entities.remove(e)}}};var $=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","PlayerInViewVector");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("Tick",this._logic)}off(){this._registered&&this._client.removeListener("Tick",this._logic)}__logic(){for(let[,e]of this._client.players.getAll())try{let i=e.getIPlayer().getEntitiesFromViewVector()[0];if(!i||i.id!=="minecraft:player")continue;let r=this._client.players.getByIPlayer(i);if(!r)continue;e.prevPlayerInVector=r,this._client.emit(this.name,{player:e,target:r})}catch(i){}}};var R=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityInViewVector");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("Tick",this._logic)}off(){this._registered&&this._client.removeListener("Tick",this._logic)}__logic(){for(let[,e]of this._client.players.getAll())try{let i=e.getIPlayer().getEntitiesFromViewVector()[0];if(!i||i.id==="minecraft:player")continue;let r=this._client.entities.getByIEntity(i);if(!r)continue;e.prevEntityInVector=r,this._client.emit(this.name,{player:e,target:r})}catch(i){}}};var O=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","PlayerTag");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("Tick",this._logic)}off(){this._registered&&this._client.removeListener("Tick",this._logic)}__logic(){for(let[,e]of this._client.players.getAll())try{for(let i of e.getTags())!i.startsWith("beapi:")||(e.removeTag(i),this._client.emit(this.name,{player:e,tag:i.replace("beapi:","")}))}catch(i){}}};var V=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityTag");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("Tick",this._logic)}off(){this._registered&&this._client.removeListener("Tick",this._logic)}__logic(){for(let[,e]of this._client.entities.getAll())try{for(let i of e.getTags())!i.startsWith("beapi:")||(e.removeTag(i),this._client.emit(this.name,{entity:e,tag:i.replace("beapi:","")}))}catch(i){}}};var j=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EnteredWater");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="in_water"&&this._client.emit(this.name,e.player)}};var F=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ExitedWater");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="exit_water"&&this._client.emit(this.name,e.player)}};var K=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Jump");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="jump"&&this._client.emit(this.name,e.player)}};var H=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Landed");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="land"&&this._client.emit(this.name,e.player)}};var U=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Swing");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="swing"&&this._client.emit(this.name,e.player)}};var J=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedBurning");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="on_fire"&&this._client.emit(this.name,e.player)}};var W=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedBurning");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="off_fire"&&this._client.emit(this.name,e.player)}};var G=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedMoving");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="on_move"&&this._client.emit(this.name,e.player)}};var q=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedMoving");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="off_move"&&this._client.emit(this.name,e.player)}};var Y=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedRiding");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="on_ride"&&this._client.emit(this.name,e.player)}};var X=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedRiding");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="off_ride"&&this._client.emit(this.name,e.player)}};var Q=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedSleeping");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="sleep"&&this._client.emit(this.name,e.player)}};var Z=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedSleeping");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="wake"&&this._client.emit(this.name,e.player)}};var ee=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedSneaking");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="sneak"&&this._client.emit(this.name,e.player)}};var te=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedSneaking");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="unsleep"&&this._client.emit(this.name,e.player)}};var ie=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedSprinting");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="on_sprint"&&this._client.emit(this.name,e.player)}};var re=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedSprinting");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="off_sprint"&&this._client.emit(this.name,e.player)}};var ne=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedSwimming");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="on_swim"&&this._client.emit(this.name,e.player)}};var oe=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedSwimming");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="off_swim"&&this._client.emit(this.name,e.player)}};function h(n,e,i){let r=Math.max(n,e),o=Math.min(n,e);return i>=o&&i<=r}var se=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityAttacked");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("Swing",this._logic)}off(){this._registered&&this._client.removeListener("Swing",this._logic)}__logic(e){let i=e.prevEntityInVector;if(e.prevEntityInVector=void 0,!i)return;let r=i==null?void 0:i.getLocation(),o=e==null?void 0:e.getLocation();if(!!(h(r.x+5,r.x-5,o.x)&&h(r.y+5,r.y-5,o.y)&&h(r.z+5,r.z-5,o.z)))return this._client.emit(this.name,{player:e,target:i})}};var le=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","PlayerAttacked");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("Swing",this._logic)}off(){this._registered&&this._client.removeListener("Swing",this._logic)}__logic(e){let i=e.prevPlayerInVector;if(e.prevPlayerInVector=void 0,!i)return;let r=i==null?void 0:i.getLocation(),o=e==null?void 0:e.getLocation();if(!!(h(r.x+5,r.x-5,o.x)&&h(r.y+5,r.y-5,o.y)&&h(r.z+5,r.z-5,o.z)))return this._client.emit(this.name,{player:e,target:i})}};import{world as Me}from"mojang-minecraft";var ae=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Explosion");t(this,"iName","beforeExplosion");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Me.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Me.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){if(this.alwaysCancel){e.cancel=!0;return}let i=this._client.entities.getByIEntity(e.source);this._client.emit(this.name,{source:i,dimension:e.dimension,impactedBlocks:e.impactedBlocks,cancel(){e.cancel=!0}})}};var ce=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Death");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="died"&&this._client.emit(this.name,e.player)}};var de=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Respawn");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||this._client.addListener("PlayerTag",this._logic)}off(){this._registered&&this._client.removeListener("PlayerTag",this._logic)}__logic(e){e.tag==="respawn"&&this._client.emit(this.name,e.player)}};import{world as De}from"mojang-minecraft";var pe=class extends a{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Tick");t(this,"iName","tick");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(De.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(De.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){this._client.emit(this.name,{currentTick:e.currentTick,deltaTime:e.deltaTime})}};var ze=[k,S,L,A,B,N,M,D,z,$,R,O,V,j,F,K,H,U,J,W,G,q,Y,X,Q,Z,ee,te,ie,re,ne,oe,se,le,ae,ce,de,pe];import{BlockLocation as me,world as ue}from"mojang-minecraft";var ge=class{constructor(e,i){t(this,"_client");t(this,"_IPlayer");t(this,"_name");t(this,"prevPlayerInVector");t(this,"prevEntityInVector");this._client=e,this._IPlayer=i,this._name=i.name}destroy(e="Instantiated player object destroyed!"){this._client.executeCommand(`kick "${this.getNameTag()}" ${e}`)}getIPlayer(){return this._IPlayer}getName(){return this._name}getNameTag(){return this._IPlayer.nameTag}setNameTag(e){this._IPlayer.nameTag=e}getTags(){return this._IPlayer.getTags()}hasTag(e){return this._IPlayer.hasTag(e)}addTag(e){return this._IPlayer.addTag(e)}removeTag(e){return this._IPlayer.removeTag(e)}sendMessage(e){this.executeCommand(`tellraw @s {"rawtext":[{"text":"${e}"}]}`)}executeCommand(e,i=!1){try{let r=this._IPlayer.runCommand(e);return{statusMessage:r.statusMessage,data:r,err:!1}}catch(r){return i&&console.warn(`[BeAPI] [Player#executeCommand]: ${String(r)}`),{statusMessage:String(r),data:null,err:!0}}}getScore(e){var r;let i=this.executeCommand(`scoreboard players test @s "${e}" * *`);return i.err?0:parseInt(String((r=i.statusMessage)==null?void 0:r.split(" ")[1]),10)}getGamemode(){let e=this._client.executeCommand(`testfor @a[name="${this.getNameTag()}",m=c]`,this.getDimensionName()),i=this._client.executeCommand(`testfor @a[name="${this.getNameTag()}",m=a]`,this.getDimensionName()),r=this._client.executeCommand(`testfor @a[name="${this.getNameTag()}",m=s]`,this.getDimensionName());return e.err?i.err?r.err?"unknown":"survival":"adventure":"creative"}getLocation(){let e=this._IPlayer.location;return{x:Math.floor(e.x),y:Math.floor(e.y-1),z:Math.floor(e.z)}}getDimension(){return this._IPlayer.dimension}getDimensionName(){let e=ue.getDimension("overworld").getEntitiesAtBlockLocation(new me(this.getLocation().x,this.getLocation().y+1,this.getLocation().z)).find(o=>o===this._IPlayer),i=ue.getDimension("nether").getEntitiesAtBlockLocation(new me(this.getLocation().x,this.getLocation().y+1,this.getLocation().z)).find(o=>o===this._IPlayer),r=ue.getDimension("the end").getEntitiesAtBlockLocation(new me(this.getLocation().x,this.getLocation().y+1,this.getLocation().z)).find(o=>o===this._IPlayer);return e?"overworld":i?"nether":r?"the end":"overworld"}getInventory(){return this._IPlayer.getComponent("minecraft:inventory")}getHealth(){return this._IPlayer.getComponent("minecraft:health")}getSelectedSlot(){return this._IPlayer.selectedSlot}kick(e="You were kicked from the game!"){this.destroy(e)}getVelocity(){return this._IPlayer.velocity}setVelocity(e){this._IPlayer.setVelocity(e)}teleport(e,i,r,o){this._IPlayer.teleport(e,i,r,o)}teleportFacing(e,i,r){this._IPlayer.teleportFacing(e,i,r)}triggerEvent(e){this._IPlayer.triggerEvent(e)}getRotation(){return this._IPlayer.bodyRotation}getHeadLocation(){return this._IPlayer.headLocation}};var ye=class{constructor(e){t(this,"_players",new Map);t(this,"_client");this._client=e}add(e){this._players.set(e.getName(),e)}create(e){return new ge(this._client,e)}remove(e){this._players.delete(e.getName())}removeByName(e){this._players.delete(e)}getAll(){return this._players}getByName(e){return this._players.get(e)}getByNameTag(e){return Array.from(this._players.values()).find(i=>i.getNameTag()===e)}getByIPlayer(e){return Array.from(this._players.values()).find(i=>i.getIPlayer()===e)}};import{Events as Je,world as pt}from"mojang-minecraft";import{world as he,BlockLocation as fe}from"mojang-minecraft";var _e=class{constructor(e,i){t(this,"_client");t(this,"_IEntity");t(this,"_runtimeId");this._client=e,this._IEntity=i,this._runtimeId=this._client.entities.newRuntimeId()}destroy(){try{this._IEntity.kill()}catch(e){}}getIEntity(){return this._IEntity}getRuntimeId(){return this._runtimeId}getId(){return this._IEntity.id}getNameTag(){return this._IEntity.nameTag}setNameTag(e){this._IEntity.nameTag=e}getTags(){return this._IEntity.getTags()}hasTag(e){return this._IEntity.hasTag(e)}addTag(e){return this._IEntity.addTag(e)}removeTag(e){return this._IEntity.removeTag(e)}executeCommand(e,i=!1){try{let r=this._IEntity.runCommand(e);return{statusMessage:r.statusMessage,data:r,err:!1}}catch(r){return i&&console.warn(`[BeAPI] [Entity#executeCommand]: ${String(r)}`),{statusMessage:String(r),data:null,err:!0}}}getScore(e){var r;let i=this.executeCommand(`scoreboard players test @s "${e}" * *`);return i.err?0:parseInt(String((r=i.statusMessage)==null?void 0:r.split(" ")[1]),10)}getLocation(){let e=this._IEntity.location;return{x:Math.floor(e.x),y:Math.floor(e.y-1),z:Math.floor(e.z)}}getDimension(){return this._IEntity.dimension}getDimensionName(){let e=he.getDimension("overworld").getEntitiesAtBlockLocation(new fe(this.getLocation().x,this.getLocation().y+1,this.getLocation().z)).find(o=>o===this._IEntity),i=he.getDimension("nether").getEntitiesAtBlockLocation(new fe(this.getLocation().x,this.getLocation().y+1,this.getLocation().z)).find(o=>o===this._IEntity),r=he.getDimension("the end").getEntitiesAtBlockLocation(new fe(this.getLocation().x,this.getLocation().y+1,this.getLocation().z)).find(o=>o===this._IEntity);return e?"overworld":i?"nether":r?"the end":"overworld"}getInventory(){if(!!this._IEntity.hasComponent("minecraft:inventory"))return this._IEntity.getComponent("minecraft:inventory")}getHealth(){return this._IEntity.getComponent("minecraft:health")}getVelocity(){return this._IEntity.velocity}setVelocity(e){this._IEntity.setVelocity(e)}teleport(e,i,r,o){this._IEntity.teleport(e,i,r,o)}teleportFacing(e,i,r){this._IEntity.teleportFacing(e,i,r)}triggerEvent(e){this._IEntity.triggerEvent(e)}getRotation(){return this._IEntity.bodyRotation}getHeadLocation(){return this._IEntity.headLocation}};var be=class{constructor(e){t(this,"_client");t(this,"_entities",new Map);t(this,"_runtimeId",0);this._client=e}newRuntimeId(){return this._runtimeId++}add(e){this._entities.set(e.getRuntimeId(),e)}create(e){return new _e(this._client,e)}remove(e){this._entities.delete(e.getRuntimeId())}removeByRuntimeId(e){this._entities.delete(e)}getAll(){return this._entities}getByNameTag(e){return Array.from(this._entities.values()).find(i=>i.getNameTag()===e)}getByRuntimeId(e){return this._entities.get(e)}getByIEntity(e){return Array.from(this._entities.values()).find(i=>i.getIEntity()===e)}getLastest(){return this._entities.get(this._runtimeId-1)}};var v="-",ve=class{constructor(e){t(this,"_client");t(this,"_handlers",new Map);t(this,"_commands",new Map);t(this,"__onChatLogic",this._onChatLogic.bind(this));this._client=e,this.register({name:"help",description:"Displays a list of available commands.",aliases:["h"]},i=>{i.sender.sendMessage("\xA7bShowing all Available Commands:"),this.getAll().forEach(r=>{r.options.hidden||i.sender.sendMessage(`  \xA77${v}${r.options.name}\xA7r \xA7o\xA78${r.options.description}`)})}),this.register({name:"about",description:"Shows info about the server.",aliases:["ab"]},i=>{i.sender.sendMessage(`\xA77This server is running \xA79BeAPI v${this._client.currentVersion}\xA77 for \xA7aMinecraft: Bedrock Edition v${this._client.currentMCBE}\xA77.`)}),this._client.on("OnChat",this.__onChatLogic)}_onChatLogic(e){var o;if(!e.sender||!e.message.startsWith("-"))return;let i=Re(v,e.message),r=(o=this._commands.get(i.command))!=null?o:Array.from(this._commands.values()).find(d=>{var p;return(p=d.options.aliases)==null?void 0:p.includes(i.command)});if(!r)return e.sender.sendMessage("\xA7c\xA7cThis command doesn't exists!"),e.cancel();r.cb({sender:e.sender,args:i.args}),e.cancel()}disable(){this._client.removeListener("OnChat",this.__onChatLogic)}createHandler(e){if(this._handlers.has(e)||e===v)throw new Error(`CommandHandler with prefix "${e}" already exists. Cannot exceed 1!`);let i=new $e(this._client,this,e);return this._handlers.set(e,i),i}removeHandler(e){this._handlers.delete(e)}getHandler(e){return this._handlers.get(e)}getHandlers(){return this._handlers}setHandler(e,i){if(this._handlers.has(e)||e===v)throw new Error(`CommandHandler with prefix "${e}" already exists. Cannot exceed 1!`);this._handlers.set(e,i)}register(e,i){this._commands.set(e.name,{options:e,cb:i})}unregister(e){this._commands.delete(e)}get(e){var i;return(i=this._commands.get(e))!=null?i:Array.from(this.getAll().values()).find(r=>{var o;return(o=r.options.aliases)==null?void 0:o.includes(e)})}getAll(){return this._commands}},$e=class{constructor(e,i,r){t(this,"_client");t(this,"_cm");t(this,"_commands",new Map);t(this,"prefix");this._client=e,this._cm=i,this.prefix=r,this.register({name:"help",description:"Displays a list of available commands.",aliases:["h"]},o=>{o.sender.sendMessage("\xA7bShowing all Available Commands:"),this.getAll().forEach(d=>{d.options.hidden||o.sender.sendMessage(`  \xA77${this.prefix}${d.options.name}\xA7r \xA7o\xA78${d.options.description}`)})}),this._client.on("OnChat",o=>{var c;if(!o.sender||!o.message.startsWith(this.getPrefix()))return;let d=Re(this.prefix,o.message),p=(c=this._commands.get(d.command))!=null?c:Array.from(this._commands.values()).find(m=>{var u;return(u=m.options.aliases)==null?void 0:u.includes(d.command)});if(!p)return o.sender.sendMessage("\xA7c\xA7cThis command doesn't exists!"),o.cancel();p.cb({sender:o.sender,args:d.args}),o.cancel()})}changePrefix(e){if(this._cm.getAll().has(e)||e===v)throw new Error(`Cannot change prefix to "${e}". Another command handler already reserves that prefix!`);this._cm.removeHandler(this.prefix),this.prefix=e,this._cm.setHandler(e,this)}getPrefix(){return String(this.prefix)}register(e,i){this._commands.set(e.name,{options:e,cb:i})}unregister(e){this._commands.delete(e)}get(e){var i;return(i=this._commands.get(e))!=null?i:Array.from(this.getAll().values()).find(r=>{var o;return(o=r.options.aliases)==null?void 0:o.includes(e)})}getAll(){return this._commands}};function Re(n,e){let i=e.replace(n,"").split(" ").filter(o=>o.length),r=i.shift();return{command:r!=null?r:"",args:i}}import{BlockLocation as lt,world as at}from"mojang-minecraft";var Ce=class{constructor(e){t(this,"_client");this._client=e}sendMessage(e){this._client.executeCommand(`tellraw @a {"rawtext":[{"text":"${e}"}]}`)}getEntitiesFromLocation(e,i){return Array.from(this._client.entities.getAll().values()).filter(o=>o.getLocation()===i&&o.getDimensionName()===e)}getPlayersFromLocation(e,i){return Array.from(this._client.players.getAll().values()).filter(o=>o.getLocation()===i&&o.getDimensionName()===e)}spawnEntity(e,i,r=""){return this._client.executeCommand(`summon ${e} "${r}" ${i.x} ${i.y} ${i.z}`),this._client.entities.getLastest()}getBlock(e,i){return at.getDimension(e).getBlock(new lt(i.x,i.y,i.z))}};var Oe="2.2.2";var Ve=Oe,je="1.18.10",Fe=485;function Ke(n){return console.warn(`[BeAPI]: Event "${n}" appears be deprecated, skipping registration. Please report this issue here: https://github.com/MCBE-Utilities/BeAPI/issues`)}function $n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function Rn(n){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(n)}function Vn(n,e){let i=[];for(let r=Math.min(n[0],e[0]);r<=Math.max(n[0],e[0]);r++)for(let o=Math.min(n[1],e[1]);o<=Math.max(n[1],e[1]);o++)for(let d=Math.min(n[2],e[2]);d<=Math.max(n[2],e[2]);d++)i.push([r,o,d]);return i}import{world as dt}from"mojang-minecraft";function f(n,e="overworld",i=!1){try{let r=dt.getDimension(e).runCommand(n);return{statusMessage:r.statusMessage,data:r,err:!1}}catch(r){return i&&console.warn(`[BeAPI] [executeCommand]: ${String(r)}`),{statusMessage:String(r),data:null,err:!0}}}function He(n){return n.split(" ").map(e=>String.fromCharCode(parseInt(e,2))).join("")}function Ue(n){return n.split("").map(e=>e.charCodeAt(0).toString(2)).join(" ")}function Ee(n){return Object.keys(n).map(e=>[e,n[e]])}var xe=class{constructor(e,i=0){t(this,"epoch");t(this,"unique");t(this,"prev",Date.now());t(this,"inc",0);this.epoch=i,this.unique=e}generate(){let e=Date.now();return e===this.prev?this.inc+=1:this.inc=0,this.prev=e,`${Math.abs(e-this.epoch)}_${this.inc}_${this.unique}`}};var Pe=class extends w{constructor(){super();t(this,"_events",new Map);t(this,"players",new ye(this));t(this,"entities",new be(this));t(this,"commands",new ve(this));t(this,"world",new Ce(this));t(this,"currentVersion",Ve);t(this,"currentMCBE",je);t(this,"currentProtocol",Fe);for(let e of ze)this._events.has(e.name)||this.loadEvent(e)}loadEvent(e){let i=new e(this);if(!this.verifyIEvent(i.iName))return Ke(i.iName);this._events.set(i.name,i),i.on()}removeEvent(e){let i=this._events.get(e);this._events.delete(e)&&(i==null||i.off())}getEvent(e){return this._events.get(e)}verifyIEvent(e){return e==="custom"?!0:Object.keys(Je.prototype).includes(e)}getAllIEvents(){return Object.keys(Je.prototype)}executeCommand(e,i="overworld",r=!1){try{let o=pt.getDimension(i).runCommand(e);return{statusMessage:o.statusMessage,data:o,err:!1}}catch(o){return r&&console.info(`[executeCommand]: ${String(o)}`),{statusMessage:String(o),data:null,err:!0}}}};var g;(p=>{function n(c){var _;let{statusMessage:m,err:u}=f("scoreboard players list");return u?[]:((_=m.match(/<{\?name=\w+&id=\w+&bin=[01 ]+}>/gi))!=null?_:[]).map(b=>p.fromRaw(b)).filter(b=>b.name===c)}p.retrieveSerializedData=n;function e(){var u,_;let{err:c,statusMessage:m}=f("scoreboard objectives list");return c?[]:(_=(u=m.match(/- (\w*):/gi))==null?void 0:u.map(b=>b.replace(/- |:/g,"")))!=null?_:[]}p.retrieveObjectiveNames=e;function i(c){return p.retrieveObjectiveNames().includes(c)}p.tableExists=i;function r(c,m,u){return`<{?name=${c}&id=${m}&bin=${Ue(u)}}>`}p.toRaw=r;function o(c){if(!/<{\?name=\w+&id=\w+&bin=[01 ]+}>/gi.test(c))throw new Error(`Not a valid collection! ${c}`);let m=new Map(c.replace(/<{\?|}>/g,"").split("&").map(et=>et.split("="))),u=m.get("id"),_=m.get("name"),b=m.get("bin").trim();return{id:u,name:_,bin:b}}p.fromRaw=o;function d(c){return!/\W/.test(c)}p.validName=d})(g||(g={}));var C=class{constructor(e,i,r){t(this,"__model__");t(this,"__id__");t(this,"__knownData__");this.__id__=i,this.__model__=e,this.__knownData__=r,Object.assign(this,r)}retrieveKnownInternalData(){return this.__knownData__}asObject(){return Object.keys(this.__model__.schema.definition).map(e=>({[e]:this[e]})).reduce((e,i)=>y(y({},e),i),{})}getId(){return this.__id__}delete(){this.__model__.delete(this.__id__)}save(){return this.__model__.sync(this.__id__),this.__knownData__=this.asObject(),this}};var We=new xe(1,16439399),Ge=class{constructor(e,i,r="BeAPI__DATABASE"){t(this,"schema");t(this,"scoreboardName");t(this,"name");t(this,"documents",new Map);if(!g.validName(r))throw Error("Invalid Scoreboard Name Format: Letters, Numbers, Underscores!");if(r.length>16)throw Error("Scoreboard Names May Not Exceed 16 Characters!");if(!g.validName(e))throw Error("Invalid Model Name Format: Letters, Numbers, Underscores!");if(this.schema=i,this.name=e,this.scoreboardName=r,!g.tableExists(r)){let o=f(`scoreboard objectives add "${r}" dummy`);if(o.err)throw new Error(o.statusMessage)}for(let o of g.retrieveSerializedData(this.name)){let d=this.schema.deserialize(He(o.bin));this.documents.set(o.id,new C(this,o.id,d))}}asArray(){return Array.from(this.documents.values())}find(e){let i=Object.keys(e).filter(r=>r!=null);return this.asArray().find(r=>i.every(o=>r.asObject()[o]===e[o]))}findAll(e){let i=Object.keys(e).filter(r=>r!=null);return this.asArray().filter(r=>i.every(o=>r.asObject()[o]===e[o]))}write(e){let i=We.generate(),r=new C(this,i,e);return this.documents.set(i,r),r.save()}writeBulk(e){let i=[];for(let r of e){let o=We.generate(),d=new C(this,o,r);this.documents.set(o,d),i.push(d.save())}return i}deleteAll(){for(let e of this.documents.keys())this.delete(e)}delete(e){let i=this.documents.get(e);!i||(f(`scoreboard players reset "${g.toRaw(this.name,e,this.schema.serialize(i.retrieveKnownInternalData()))}" "${this.scoreboardName}"`),this.documents.delete(e))}sync(e){let i=this.documents.get(e);if(!i)return;f(`scoreboard players reset "${g.toRaw(this.name,e,this.schema.serialize(i.retrieveKnownInternalData()))}" "${this.scoreboardName}"`);let r=f(`scoreboard players add "${g.toRaw(this.name,e,this.schema.serialize(i.asObject()))}" "${this.scoreboardName}" 0`);if(r.err)throw new Error(r.statusMessage)}};function No(n,e,i="BeAPI__DATABASE"){return new Ge(n,e,i)}var qe=class{constructor(e){t(this,"definition");this.definition=e}serialize(e){return JSON.stringify(Ee(e).map(([i,r])=>{let o=this.definition[i];if(!o)throw Error(`Invalid Object Property "${i}"`);return{[i]:o.serialize(r)}}).reduce((i,r)=>y(y({},i),r),{}))}deserialize(e){return Ee(JSON.parse(e)).map(([i,r])=>{let o=this.definition[i];if(!o)throw Error(`Invalid Object Property "${i}"`);return{[i]:o.deserialize(r)}}).reduce((i,r)=>y(y({},i),r),{})}};function zo(n){return new qe(n)}var x=String,P=Number,Ye=Boolean,Xe=Array,Qe=Map,Ze;(d=>{class n extends x{static serialize(c){return x(c)}static deserialize(c){return x(c)}}d.String=n;class e extends P{static serialize(c){return P(c)}static deserialize(c){return P(c)}}d.Number=e;class i extends Ye{static serialize(c){return P(c?1:0)}static deserialize(c){return Ye(c===1)}}d.Boolean=i;class r extends Xe{static serialize(c){return x(JSON.stringify(c))}static deserialize(c){return Xe(...JSON.parse(c))}}d.Array=r;class o extends Qe{static serialize(c){return JSON.stringify(r.from(c.entries()))}static deserialize(c){return new Qe(JSON.parse(c))}}d.Map=o})(Ze||(Ze={}));var E=console.warn;globalThis.console={log(n,...e){E(`\xA79[BeAPI]\xA7r \xA7b[LOG]:\xA7r ${n} ${e.join(" ")}`)},error(n,...e){E(`\xA79[BeAPI]\xA7r  \xA7c[ERROR]:\xA7r ${n} ${e.join(" ")}`)},warn(n,...e){E(`\xA79[BeAPI]\xA7r  \xA7g[WARN]:\xA7r ${n} ${e.join(" ")}`)},info(n,...e){E(`\xA79[BeAPI]\xA7r  \xA7a[INFO]:\xA7r ${n} ${e.join(" ")}`)},debug(n,...e){E(`\xA79[BeAPI]\xA7r  \xA7d[DEBUG]:\xA7r ${n} ${e.join(" ")}`)}};var mt=new I,ut=new Pe;mt.start(ut);export{a as AbstractEvent,Pe as Client,$e as CommandHandler,ve as CommandManager,g as DatabaseUtil,C as Document,_e as Entity,be as EntityManager,w as EventEmitter,Ge as Modal,ge as Player,ye as PlayerManager,xe as SafeIds,qe as Schema,Ze as SchemaTypes,I as Timers,Ce as WorldManager,h as between,He as binToString,ut as client,Ke as deprecated,Ee as entries,ze as events,$n as genUuid,Vn as getAll,je as mcbe,No as modal,Re as parse,Fe as protocol,f as runCommand,zo as schema,Ue as stringToBin,Rn as verifyUuid,Ve as version};
//# sourceMappingURL=index.mjs.map